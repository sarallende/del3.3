DROP DATABASE IF EXISTS juego;
CREATE DATABASE juego;

USE juego;

CREATE TABLE PLAYERS (
	ID INT NOT NULL,
	USERNAME VARCHAR(60),
	PASSWORD VARCHAR(60),
	PUNTOS INT,
	PRIMARY KEY (ID)
)ENGINE=InnoDB;

CREATE TABLE MATCHES (
	ID INT NOT NULL,
	DATE_TIME_FINISH DATETIME,
	DURATION INT, /* MINUTOS */
	WINNER VARCHAR(60),
	PRIMARY KEY (ID)
)ENGINE=InnoDB;

CREATE TABLE PUENTE (
	ID_PLAYER INT,
	ID_MATCH INT,
	FOREIGN KEY (ID_PLAYER) REFERENCES PLAYERS(ID),
	FOREIGN KEY (ID_MATCH) REFERENCES MATCHES(ID)
)ENGINE=InnoDB;

INSERT INTO PLAYERS VALUES (1,'SARA','SARA1',24);
INSERT INTO PLAYERS VALUES (2,'MARIA','MARIA2',20);
INSERT INTO PLAYERS VALUES (3,'LAURA','LAURA3',13);
INSERT INTO PLAYERS VALUES (4,'JOSE','JOSE4',9);
INSERT INTO PLAYERS VALUES (5,'PETRA','PETRA5',14);
INSERT INTO PLAYERS VALUES (6,'LOLA','LOLA6',14);

INSERT INTO MATCHES VALUES (1,'2024-09-29 11:06:00',10,'SARA'); 
INSERT INTO MATCHES VALUES (2,'2024-09-29 11:07:59',15,'LAURA');
INSERT INTO MATCHES VALUES (3,'2024-09-29 12:00:00',20,'PETRA');

INSERT INTO PUENTE VALUES (1,1);
INSERT INTO PUENTE VALUES (2,1);
INSERT INTO PUENTE VALUES (4,1);
INSERT INTO PUENTE VALUES (3,2);
INSERT INTO PUENTE VALUES (5,2);
INSERT INTO PUENTE VALUES (6,2);
INSERT INTO PUENTE VALUES (5,3);
INSERT INTO PUENTE VALUES (1,3);
INSERT INTO PUENTE VALUES (2,3);

/* EN CUANTAS PARTIDAS EST√Å JUGANDO EL JUGADOR SARA (preba antes de hacer el archivo c)*/

/* SELECT COUNT(DISTINCT PUENTE.ID_MATCH) AS NUMERO_DE_PARTIDAS FROM (PLAYERS, PUENTE, MATCHES)
WHERE PLAYERS.USERNAME = 'SARA'
AND PLAYERS.ID = PUENTE.ID_PLAYER */












